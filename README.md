# Libba Mythra

[![Build Status](https://img.shields.io/badge/build-passing-brightgreen)](https://github.com/libba-hub/mythra/actions)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![.NET Version](https://img.shields.io/badge/.NET-8.0-blueviolet.svg)](https://dotnet.microsoft.com/)

**Mythra**, under the **Libba** umbrella, is an advanced code generation and project scaffolding platform designed for modern software architectures. Its purpose is to transcend static approaches like T4 templates by generating high-quality, production-ready codebases from database schemas and user-defined rules.

This repository contains the core foundation of Mythra and its reference architecture for the .NET platform. This architecture serves as a blueprint for the code that Mythra generates, embodying a set of robust and scalable engineering principles.

## ‚ú® Mythra's Vision

Mythra aims to solve a fundamental challenge in software development: the high initial cost and complexity of establishing a robust, scalable, and maintainable foundation.

*   **Schema-to-Code:** Define your database structure, and Mythra will intelligently generate all necessary layers, from entities and repositories to CQRS commands and API endpoints.
*   **Architectural Independence:** Mythra is designed to be architecture-agnostic. While it initially supports modern patterns like Clean Architecture and CQRS, its engine is built to accommodate different architectural templates in the future.
*   **Multi-Language Support:** The initial target is the C# and .NET ecosystem, but the core engine is designed with extensibility in mind to generate code for other languages such as Go and Python.
*   **Team & Project Management:** Mythra is more than a code generator; it's an integrated workspace for managing teams, projects, and architectural templates. Its built-in authorization system allows teams to work in secure and isolated environments.

## üèõÔ∏è Guiding Principles of the Reference Architecture

The code in this repository is the reference model for .NET systems generated by Mythra and is built upon these core principles:

*   **Microservice-Ready Monolith:** It offers the development and deployment simplicity of a monolith while being structured for a low-cost, low-friction transition to a microservice architecture when needed.
*   **Developer Experience (DevEx) as a Priority:** The architecture guides developers toward best practices. Mechanisms like automatic service registration via scanning and reflection-based configuration minimize boilerplate, allowing developers to focus purely on business logic.
*   **Pragmatic Technology Choices:** The principle is to use the right tool for the job. Technology selections are made based on pragmatic criteria like performance, security, and maintainability, rather than adhering to a single stack or trend.
*   **Interchangeable Components:** Every layer is designed for modularity. Core components, from infrastructure (ORM/Micro-ORM) to application tools (e.g., AutoMapper), are abstracted behind interfaces, ensuring maximum flexibility against future technological shifts.

## ‚ú® Technical Specifications of the Reference Architecture

*   **Clean Architecture:** A strict dependency rule ensures the core `Domain` is isolated from external concerns. The `Application` layer is further divided into `Contract` and `Service` projects to enforce this principle at the compiler level.
*   **CQRS (Command Query Responsibility Segregation):**
    *   **Write Side:** Utilizes **Entity Framework Core** for its rich features in transaction management and data integrity.
    *   **Read Side:** Employs **RepoDb** for high-performance data retrieval and complex queries.
*   **Vertical Slice Architecture:** All code related to a single feature (Command, Handler, DTO) is co-located within its own folder for high cohesion.
*   **Domain-Driven Design (Strategic Design):** Business domains like `Auth` are isolated in their own `Service` libraries. Services never communicate directly; they interact indirectly through the **MediatR** library.

## üöÄ Technology Stack (for the Reference Architecture)

*   **Backend:** .NET 8
*   **Framework:** ASP.NET Core
*   **ORM (Write):** Entity Framework Core
*   **Micro-ORM (Read):** RepoDb
*   **Database:** PostgreSQL
*   **In-Process Bus:** MediatR
*   **DI Container Scanning:** Scrutor
*   **API Documentation:** Swagger (Swashbuckle)

## üèÅ Getting Started (with the Reference Architecture)

This section explains how to run the Mythra reference architecture on your local machine.

### Prerequisites

*   [.NET 8 SDK](https://dotnet.microsoft.com/download/dotnet/8.0)
*   [Docker](https://www.docker.com/products/docker-desktop) (for PostgreSQL)
*   Your preferred code editor (VS Code, Visual Studio, Rider)

### Setup

1.  **Clone the Repository:**
    ```sh
    git clone https://github.com/libba-hub/mythra.git
    cd mythra
    ```

2.  **Start the Database:**
    Use Docker to run a PostgreSQL instance. If a `docker-compose.yml` file is present, you can use:
    ```sh
    docker-compose up -d
    ```

3.  **Create the Database and Run Scripts:**
    This is a **Database First** project. Connect to your PostgreSQL instance using your favorite SQL client.
    *   Create a new database (e.g., `mythra_db`).
    *   Execute the SQL scripts located in the `/database-scripts` folder (to be added) to create the schema and tables.

4.  **Configure Connection String:**
    Open the `appsettings.Development.json` file located in `src/Presentation/Libba.Mythra.Presentation.WebAPI/`. Modify the `PostgreSqlConnection` string with your database credentials.
    ```json
    {
      "ConnectionStrings": {
        "PostgreSqlConnection": "Host=localhost;Port=5432;Database=mythra_db;Username=your_user;Password=your_password"
      }
    }
    ```

### Running the Application

Navigate to the Presentation project folder and run the application:
```sh
cd src/Presentation/Libba.Mythra.Presentation.WebAPI
dotnet watch run
```

You can access the Swagger UI at `https://localhost:44385/swagger`.
